<!DOCTYPE html><!--
#*\
##=========+====================+================================================+
##RD           index_final.html | My Javascript Custom App (Combined)
##RFILE    +====================+=======+===============+======+=================+
##FD index_..._u2.03_byRAM.html |  13326|  3/07/23 21:18|   271| u2.03-30307.2100
##FD index_..._u2.03_byRAM.html |  13973|  3/08/23 08:26|   269| u2.04-30308.1500
##DESC     .--------------------+-------+---------------+------+-----------------+
#           This HTML file, copied from the first App in Client1 in FRApps is
#           used to create the JavaScript apps documented in FRDocs.
#           This version has the HTML and Javascript combined in one file.
##LIC      .--------------------+----------------------------------------------+
#           Copyright (c) 2023 8020Data-formR * Released under
#           MIT License: http://www.opensource.org/licenses/mit-license.php
##SRCE     +====================+===============================================+
#*/
-->
<html lang="en">

    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">

      <title id="page-title">c21. My JavaScript Custom App (u2.03_byRAM_v30308.1500)</title>

      <link rel="shortcut icon" href="favicon.png">
      <link rel="stylesheet"    href="https://fonts.googleapis.com/css?family=EB Garamond" >
      <link rel="stylesheet"    href="https://fonts.googleapis.com/css?family=Roboto+Slab" >

      <link rel="stylesheet"    href="index_final_layout.css" id="index_final.css">

      <script type="module">                                                        // .(30306.02.3 Write Get UI Data script)
//     --------  -------------  =  -------------------------------------------------------------------- ---

            var  aVer           = `u2.04_byRAM_v30308.1400`

            var  mMatch         =  location.search.match( /(custom|layout|empty)/i )
            var  aTheme         = (mMatch && mMatch[1]) ? mMatch[1] : 'layout'

            var  aSheet         =  aTheme != "empty" ? aTheme : "layout"
            var  pSheet         =  document.getElementById( 'index_final.css' );
                                   pSheet.setAttribute( 'href', `index_final_${aSheet}.css` )

            var  aLetter        =  aTheme.substr( 0, 1 ); aLetter = aLetter != "l" ? aLetter : "a"
                 aTheme         = `${ aTheme.substr( 0, 1 ).toUpperCase() }${ aTheme.substr(1) }`
        document.title          = `c21.2${aLetter}. My JavaScript ${aTheme} App (${aVer})`

          window.THE_UI_URL     = `./assets/data/ui-${aTheme}.json`
//        window.THE_UI_URL     = `https://localhost:3000:/assets/data/ui-${aTheme}.json`

//     --------  -------------  =  --------------------------------------------------------------------

//          var  pJSON          =  await (await fetch( THE_UI_URL )).json( )

          window.getHeader      =  async function( ) {
            var  pJSON          =  await (await fetch( THE_UI_URL )).json( )
         return  pJSON.layout.header
                 }
//       ------  -------------  =  ---------------------------------------------------------

          window.getMenu_Top    =  function( ) { return pJSON.layout.header.menus.top }

//       ------  -------------  =  ---------------------------------------------------------

          window.getMenu_Side   =  async function( ) {
            var  pJSON          =  await (await fetch( THE_UI_URL )).json( )
         return  pJSON.layout.header.menus.side
                 }
//       ------  -------------  =  ---------------------------------------------------------

          window.getFooter      =  function( ) { return pJSON.layout.footer }

          window.getSections    =  function( ) { return pJSON.layout.sections }

//       ------  -------------  =  ---------------------------------------------------------

            var  pJSON          =  await (await fetch( THE_UI_URL )).json( )

                 console.log( pJSON )                                                  // .(30306.02.3 End)
//     --------  -------------  =  -------------------------------------------------------------------- ---
      </script>

    </head>
    <body>

    <!-- REPLACE Point - Header -->
        <div class="Header">

        <!-- INSERT Point - Responsive -->
            <div class="MenuWrap">

                <input class="Toggler" type="checkbox" title="Menu">

                <div   class="Hamburger"><div></div></div>

                <div   class="Menu">
                  <ul  class="MenuList" id="MenuSide"></ul>                       <!-- .(30306.01.2 Add id and remove content) -->

      <script type="module">                                                        // .(30306.01.3 Add fmtMenuList2 script)
//     --------  -------------  =  -------------------------------------------------------------------- ---

            var  mMenu_Side     =  await    getMenu_Side( )
            var  pMenu_Side     =  document.getElementById( "MenuSide" )
                 pMenu_Side.innerHTML    =  fmtMenu_Side(   mMenu_Side )

//     --------  -------------  =  --------------------------------------------------------------------

       function  fmtMenu_Side( mMenu_List ) {

            var  mHTML_Items    =  mMenu_List.map( fmtMenu_Item )
    /*      var  mHTML_Items    =`
                 <li class="MenuListItem"     id="H-PHLink"    ><a href="#"  >Home</a></li>
                 <li class="MenuListItemLine" id="PHLinkLine"  ><hr></li>
                 <li class="MenuListItem"     id="H-PHLinkCTA" ><a href="#"  >H-PH_CTA</a></li>
                 <li class="MenuListItem"     id="H-PHLink"    ><a href="#"  >H-PH_Link1</a></li>
                 <li class="MenuListItem"     id="H-PHLink"    ><a href="#"  >H-PH_Link2</a></li>
                 <li class="MenuListItem"     id="H-PHLink"    ><a href="#"  >H-PH_Link3</a></li>
                 <li class="MenuListItemLine" id="PHLinkLine"  ><hr></li>
                 <li class="MenuListItem"     id="F-PHLink"    ><a href="#"  >F-PH_Link1</a></li>
                 <li class="MenuListItem"     id="F-PHLink"    ><a href="#"  >F-PH_Link2</a></li>
                 <li class="MenuListItemLine" id="PHLinkLine"  ><hr></li>
         `
     */  return  mHTML_Items.join( "\n" )

//     --------  -------------  =  --------------------------------------------------------------------

       function  fmtMenu_Item( pItem ) {

             if (pItem.URL) {
         return `<li class="${pItem.Class}" id="${pItem.Id}"><a href="${pItem.URL}">${pItem.Text}</a></li>`
             } else {
         return `<li class="${pItem.Class}" id="${pItem.Id}"><hr></li>`
                 }
              }  // eof fmtMenu_Item
//        -----  -------------  =  ----------------------------------------
              }  // eof fmtMenu_Side
//     --------  -------------  =  -------------------------------------------------
                                                                                    // .(30306.01.3 End)
      </script>

                </div>
            </div>
        <!-- END INSERT Point - Responsive -->

        <!-- REPLACE Point Logo -->
            <div class="HeaderLogo"    id="HeaderLogo"></div>                     <!-- .(30306.01.4 Add id and remove content) -->
        <!-- END REPLACE Point - Logo -->

            <div class="HeaderSpacer"></div>

            <ul  class="HeaderNavList" id="HeaderNavList"></ul>                   <!-- .(30306.01.5 Add id and remove content) -->

       <script type="module">                                                       // .(30306.01.6 Add fmtMenu1_List script)
 //     --------  -------------  =  --------------------------------------------------------------------

            var  pHeader        =  await    getHeader( )
                                            fmtHeader_Logo(  pHeader.menus.logo, "HeaderLogo"    )

            var  pMenu1_List    =  document.getElementById(                      "HeaderNavList" )
                 pMenu1_List.innerHTML   =  fmtMenu1_List(   pHeader.menus.top )

//     --------  -------------  =  -------------------------------------------------

       function  fmtMenu1_List(  mMenuList ) {

            var  mHTML_Items    =  mMenuList.map( fmtMenu_Item )
      /*    var  mHTMLrows    =`
                 <li class="HeaderNavListItem"   ><a href=#>PH_Link1</a></li>
                 <li class="HeaderNavListItem"   ><a href=#>PH_Link2</a></li>
                 <li class="HeaderNavListItem"   ><a href=#>PH_Link3</a></li>
                 <li class="HeaderNavListItemCTA"><a href=#>PH_CTA</a></li>
                 `
      */ return  mHTML_Items.join( "\n" )

//        -----  -------------  =  ---------------------------------------

       function  fmtMenu_Item( pItem ) {

         return `<li class="${pItem.Class}"><a href="${pItem.URL}">${pItem.Text}</a></li>`
              }  // eof fmtMenu_Item
//        -----  -------------  =  ---------------------------------------
              }  // eof fmtMenu1_List
//     --------  -------------  =  -------------------------------------------------

       function  fmtHeader_Logo( pLogo, aDiv ) {

            var  pDiv = document.getElementById( aDiv )
                 pDiv.className =  pLogo.Class ? pLogo.Class : ''
                 pLogo.Text     =  pLogo.Text  ? pLogo.Text  : ''
             if (pLogo.Style) {
                 pDiv.style.cssText  =  fmtCSS( pLogo.Style )
                 }
                 pDiv.innerHTML =  pLogo.URL ? `<a href="${pLogo.URL}">${pLogo.Text}</a>` : ``
              }  // eof fmtHeaderLogo
//     --------  -------------  =  -------------------------------------------------

            var  mSections      =  await    getSections( )
                 fmtSection1_Body( mSections[0], "Section1_Body" )
                 fmtSection2_Body( mSections[1], "Section2_Body" )

//     --------  -------------  =  -------------------------------------------------

       function  fmtSection1_Body( pBody, aDiv ) {
            if (!pBody) { return }
            var  pDiv = document.getElementById( aDiv )
                 pBody.Text     =  pBody.Text  ? pBody.Text  : ''
             if (pBody.Style) {
                 pDiv.style.cssText  =  fmtCSS( pBody.Style )
                 }
                 pDiv.innerHTML = `<h2 class="${pBody.Class}">${pBody.Text}</a>`
              }  // eof fmtSection1_Body
//     --------  -------------  =  -------------------------------------------------

       function  fmtSection2_Body( pBody, aDiv ) {
            if (!pBody) { return }
            var  pDiv = document.getElementById( aDiv )
                 pDiv.className = pBody.Class ? pBody.Class : ''
                 pDiv.innerHTML = pBody.Text.join("\n")
              }  // eof fmtSection2_Body
//     --------  -------------  =  -------------------------------------------------

                 fmtFooter( await  getFooter(), "FooterNavList" )

//     --------  -------------  =  -------------------------------------------------

       function  fmtFooter( pFooter, aDiv ) {
            var  pDiv = document.getElementById( aDiv )
                 pDiv.innerHTML = pFooter.items.map( pItem => {
         return `<li class="${pItem.Class}"><a href="${pItem.URL}">${pItem.Text}</a></li>`
                 } )
              }  // eof fmtFooter
//     --------  -------------  =  -------------------------------------------------

       function  fmtCSS( pStyle ) {
//       return  JSON.stringify( pLogo.Style ).replace( /,/g, ";" ).replace( /[{}]/, "")
         return  Object.keys( pStyle ).map( aKey => `${ aKey }: ${ pStyle[aKey] }` ).join( "; " )
              }  // eof fmtCSS
//     --------  -------------  =  -------------------------------------------------
//     --------  -------------  =  -------------------------------------------------------------------- ---
                                                                                    // .(30306.01.6 End)
     </script>

        </div>
    <!-- END REPLACE Point - Header -->


    <!-- REPLACE Point - Section1 -->
        <div  class="Section1"  id="Section1_Body"></div>                         <!-- .(30306.01.7 Add id and remove content) -->
    <!-- END REPLACE Point - Section1 -->


    <!-- REPLACE Point - Section2 -->
        <div  class="Section2"  >
          <h2></h2>
          <p id="Section2_Body"></p>                                              <!-- .(30306.01.8 Add id and remove content) -->
        </div>
    <!-- END REPLACE Point - Section2 -->


    <!-- REPLACE Point - Footer -->
        <div  class="Footer">
          <ul class="FooterNavList" id="FooterNavList"></ul>                      <!-- .(30306.01.9 Add id and remove content) -->
        </div>
    <!-- END REPLACE Point - Footer -->

<!--        --------  --------------------------------------------------------------------------------- ---
    </body>
</html>
